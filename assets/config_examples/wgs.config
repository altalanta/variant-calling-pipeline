/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Configuration for Whole Genome Sequencing (WGS) analysis
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/

params {
    // Enable all optional steps for comprehensive WGS analysis
    run_bqsr = true
    run_joint = true
    run_fastp = true
    
    // WGS-specific resource allocations
    max_cpus = 32
    max_memory = '128.GB'
    max_time = '48.h'
    
    // Reference files for GRCh38/hg38
    ref_fasta = '/path/to/reference/hg38.fa'
    known_sites_vcf = '/path/to/reference/dbsnp_151.hg38.vcf.gz'
    
    // No target regions for WGS (whole genome)
    targets_bed = null
    
    // Output configuration
    publish_dir_mode = 'copy'
    
    // MultiQC configuration
    multiqc_title = 'WGS Variant Calling Report'
}

// WGS-specific process configurations
process {
    
    // Increase resources for alignment (large input files)
    withName:ALIGN_BWA_MEM2 {
        cpus = { check_max( 16 * task.attempt, 'cpus' ) }
        memory = { check_max( 64.GB * task.attempt, 'memory' ) }
        time = { check_max( 12.h * task.attempt, 'time' ) }
    }
    
    // Increase resources for variant calling
    withName:CALL_GATK_HC {
        cpus = { check_max( 8 * task.attempt, 'cpus' ) }
        memory = { check_max( 32.GB * task.attempt, 'memory' ) }
        time = { check_max( 16.h * task.attempt, 'time' ) }
    }
    
    // Joint genotyping for multiple samples
    withName:JOINT_GENOTYPE {
        cpus = { check_max( 16 * task.attempt, 'cpus' ) }
        memory = { check_max( 64.GB * task.attempt, 'memory' ) }
        time = { check_max( 24.h * task.attempt, 'time' ) }
    }
    
    // Mark duplicates with higher memory for large WGS files
    withName:MARKDUP {
        memory = { check_max( 32.GB * task.attempt, 'memory' ) }
        time = { check_max( 8.h * task.attempt, 'time' ) }
    }
}
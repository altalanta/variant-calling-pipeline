/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Configuration for Whole Exome Sequencing (WES) analysis
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
*/

params {
    // Enable BQSR but disable joint calling by default for exome
    run_bqsr = true
    run_joint = false
    run_fastp = true
    
    // Exome-specific resource allocations (smaller than WGS)
    max_cpus = 16
    max_memory = '64.GB'
    max_time = '24.h'
    
    // Reference files for GRCh38/hg38
    ref_fasta = '/path/to/reference/hg38.fa'
    known_sites_vcf = '/path/to/reference/dbsnp_151.hg38.vcf.gz'
    
    // Exome target regions (update path as needed)
    targets_bed = '/path/to/targets/exome_targets.bed'
    
    // Output configuration
    publish_dir_mode = 'copy'
    
    // MultiQC configuration
    multiqc_title = 'Exome Sequencing Variant Calling Report'
}

// Exome-specific process configurations
process {
    
    // Standard resources for exome alignment
    withName:ALIGN_BWA_MEM2 {
        cpus = { check_max( 8 * task.attempt, 'cpus' ) }
        memory = { check_max( 24.GB * task.attempt, 'memory' ) }
        time = { check_max( 6.h * task.attempt, 'time' ) }
    }
    
    // Variant calling with target regions
    withName:CALL_GATK_HC {
        cpus = { check_max( 4 * task.attempt, 'cpus' ) }
        memory = { check_max( 16.GB * task.attempt, 'memory' ) }
        time = { check_max( 8.h * task.attempt, 'time' ) }
        ext.args = '--emit-ref-confidence GVCF --intervals $targets_bed'
    }
    
    // Reduced resources for smaller exome files
    withName:MARKDUP {
        memory = { check_max( 16.GB * task.attempt, 'memory' ) }
        time = { check_max( 4.h * task.attempt, 'time' ) }
    }
    
    // BQSR with target regions
    withName:BQSR {
        ext.args = '--intervals $targets_bed'
    }
}